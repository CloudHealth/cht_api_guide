---
title: Get All Policy Violations
position: 4
description: Retrieve a list of all policy violations generated by a policy block.
type: get
endpoint: https://chapi.cloudhealthtech.com/v1/policies/<policy_id>/policy_blocks/<policy_block_id>/violations
parameters:
  - name: policy_id
    required: yes
    content: The policy ID of the policy. The policy ID can be retrieved using the [Get All Policies](#policies_get-all-policies) endpoint.
  - name: policy_block_id
    required: yes
    content: The policy block ID of the policy block. The Policy block ID can be retrieved using the [Get All Policy Blocks](#policies_get-all-policy-blocks) endpoint.
  - name: api_key
    required: no
    content: String that specifies the unique customer API Key, or Client API ID, that CloudHealth generates. Use this parameter if you are a partner who wants to retrieve a list of all policies belonging to a partner customer. See [How to Get Client API ID](#partner_how-to-get-client-api-id).
  - name: per_page
    required: no
    content: Specify how many results should be displayed per page. Default value is 30.
  - name: page
    required: no
    content: Specify the page number for results.
  - name: count
    required: no
    content: Specify the number of violations to return. Default value is 1.
content_markdown: |-
  | Response Code              | Description              |
  | -------------------------- | ------------------------ |
  | `403 Forbidden`            | Missing API Key<br>Unable to find Client ID from Partner Customers<br>User does not have role permission to use this endpoint |
  | `404 Not Found`            | Policy block ID not found             |
  | `422 Unprocessable Entity` | Exceeded maximum 30 per page<br>Page parameters must be greater than zero<br>Past violation count parameter must be greater than zero<br>Exceeded maximum 100000 past violations     |
right_code_blocks:
  - code_block: |-
      {
        "id": "6116033458540",
        "resource_type": "aws_ec2_instance",
        "policy_violations": [
          {
            "alerts": [
              {
                "alert_id": 6116034999228,
                "evaluation_time": "2019-07-29T20:55:50Z",
                "description": "541 M5 instances are large size or larger ",
                "severity": "Critical",
                "affected_resources": 541,
                "uniq_key": ""
              }
            ]
          },
          {
            "alerts": [
              {
                "alert_id": 6116034999178,
                "evaluation_time": "2019-07-24T17:14:04Z",
                "description": "541 M5 instances are large size or larger ",
                "severity": "Critical",
                "affected_resources": 541,
                "uniq_key": ""
              }
            ]
          },
        ],
        "_links": {
          "next": {
            "href": "/v1/policies/6116033430880/policy_blocks/6116033458540/violations?count=4&page=2&per_page=2"
          }
        }
      }
    title: Response Body
    language: json
  - code_block: |-
      curl --request GET \
        'https://chapi.cloudhealthtech.com/v1/policies/<policy_id>/policy_blocks/<policy_block_id>/violations?api_key=<client_api_id>&count=5' \
        -H 'Authorization: Bearer <your_api_key>'
        -H 'Content-Type: application/json'
    title: Sample Request
    language: bash
---
